# src_frontend/Dockerfile

FROM nginx:1.29.0-alpine

# ‡∞™‡∞æ‡∞§ ‡∞°‡∞ø‡∞´‡∞æ‡∞≤‡±ç‡∞ü‡±ç NGINX ‡∞ï‡∞æ‡∞®‡±ç‡∞´‡∞ø‡∞ó‡∞∞‡±á‡∞∑‡∞®‡±ç ‡∞´‡±à‡∞≤‡±ç‚Äå‡∞≤‡∞®‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
RUN rm /etc/nginx/nginx.conf /etc/nginx/conf.d/default.conf

# NGINX ‡∞ï‡±ç‡∞Ø‡∞æ‡∞∑‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞≤‡∞æ‡∞ó‡±ç ‡∞°‡±à‡∞∞‡±Ü‡∞ï‡±ç‡∞ü‡∞∞‡±Ä‡∞≤‡∞®‡±Å ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞ø, ‡∞Ö‡∞®‡±Å‡∞Æ‡∞§‡±Å‡∞≤‡∞®‡±Å ‡∞∏‡±Ü‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
RUN mkdir -p /var/cache/nginx/client_temp && \
    mkdir -p /var/cache/nginx/proxy_temp && \
    mkdir -p /var/cache/nginx/fastcgi_temp && \
    mkdir -p /var/cache/nginx/uwsgi_temp && \
    mkdir -p /var/cache/nginx/scgi_temp && \
    chown -R nginx:nginx /etc/nginx/ && \
    chown -R nginx:nginx /var/log/nginx

# SSL ‡∞°‡±à‡∞∞‡±Ü‡∞ï‡±ç‡∞ü‡∞∞‡±Ä‡∞≤‡∞®‡±Å ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
RUN mkdir -p /etc/nginx/ssl/ && \
    chown -R nginx:nginx /etc/nginx/ssl/ && \
    chmod -R 755 /etc/nginx/ssl/

# PID ‡∞´‡±à‡∞≤‡±ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞Ö‡∞®‡±Å‡∞Æ‡∞§‡±Å‡∞≤‡±Å
RUN touch /var/run/nginx.pid && \
    chown -R nginx:nginx /var/run/nginx.pid /run/nginx.pid

# 1. ‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡±ç NGINX ‡∞ï‡∞æ‡∞®‡±ç‡∞´‡∞ø‡∞ó‡∞∞‡±á‡∞∑‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
ADD nginx.conf /etc/nginx/nginx.conf

# 2. üì¢ ‡∞ö‡∞æ‡∞≤‡∞æ ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Æ‡±à‡∞®‡∞¶‡∞ø: Massively UI ‡∞´‡±à‡∞≤‡±ç‚Äå‡∞≤‡∞®‡±Å NGINX ‡∞∞‡±Ç‡∞ü‡±ç ‡∞°‡±à‡∞∞‡±Ü‡∞ï‡±ç‡∞ü‡∞∞‡±Ä‡∞≤‡±ã‡∞ï‡∞ø ‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
ADD static /usr/share/nginx/html/ 


USER nginx

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]